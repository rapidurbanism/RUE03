# Rapid Urbanism Explorer

The Rapid Urbanism Explorer is an Augmented Intelligence (AI) Platform to strengthen collaboration
amongst decision makers in developing new urban districts in advanced ways. Rapid iterative virtual
prototyping empowers stakeholders to produce complex urbanization scenarios integrating spatial,
temporal, socioeconomic and environmental parameters in real time. Further info on
[www.RapidUrbanism.com/Explorer-AI](www.RapidUrbanism.com/Explorer-AI).

# Rapid Urbanism Explorer Version 0.3

This is version 0.3 of RUE. This version is an early prototype of the software. 

This software is offered under the [MIT License](https://github.com/design-automation/mobius-parametric-modeller-dev-0-6/raw/master/LICENSE).

[**Please read the terms and conditions of this software.**](Terms_of_Use.pdf)

RUE has been tested on the Chrome browser.

![RUE 0.3](rue03.png)

## Overview

The RUE explorer consist of two parts: a spatial model and a financial model.
- The spatial model starts with a site and uses a set of parametric scripts to generate a spatial
  model of the proposed development. The spatial model includes both the 3D geometry and a set of
  other data associated with that model.
- The financial model start with the data generated by the spatial model and calculates various
  metrics relating to economic and social viability of the project.

On the left hand side, the user enters a set of spatial parameter values that drive the spatial
model. Clicking the `Apply` button then updates the the spatial model, which in turn updates the
financial model.

The software is completely client-side. It does not perform any computation on the server. This
allows the software to be used anywhere, even in locations where Internet connectivity is poor. 

## Spatial Model

For the spatial models, RUE uses Mobius Modeller, a client-side parametric modelling software in the
browser.

The spatial model consist of four scripts:
- _City_: Generates the site polygon.
- _Neighbourhood_: Subdivides the site into a set of roads and partitions.
- _Tissue_: Subdivides partitions into lots.
- _Starter Buildings_: Generates 3D building massings on the lots.

The input parameters for the spatial model are shown on the left hand side. The tabs along the top
of the 3D viewer allow different model outputs to be shown. 

## Financial Model

For the financial models, RUE uses LuckySheet, a client-side spreadsheet.

The financial model consist of s single spreadsheet. Values from the spatial model are inserted into
specific cells in the spreadsheet, which then triggers the spreadsheet calculations to be executed. 

The financial model was developed as a Microsoft Excel spreadsheet, and then converted into the
LuckySheet format. The Excel file was manually converted, by loading the file into an [online
LuckySheet application](https://mengshukeji.github.io/LuckyexcelDemo/). The data was then extracted
and incorporated into the RUE application. 

## Saving and Loading Simulations

The settings for a specific simulation can be saved and loaded as a RUE file (with a _.rue_ extension). 

The functionality is available under the three-bar menu button available in the top-left hand
corner.
- `New Simulation`: Start a new simulation.
- `Save Simulation`: Save the current simulation settings to a RUE file on your hard-disk.
- `Load Simulation`: Open previously saved simulation settings from a RUE file on your hard-disk.

## Site Definition

Version 0.3 of RUE includes three options for defining the project site. These are available under
the drop-down menu under `City > Site Definition`.
- VMC Site: Loads a default hard-coded site, to be used for demonstration purposes. This is the
  default option. 
- Load Site: Allows you to load a geojson file that specifies a custom site. See below for more
  information on the requirements of this site.
- Dummy Site: Create a simple quadrilateral site for testing and debugging, the same as the method
  used in version RUE 0.2.

## Geojson Input format

[To be complete]

## Framework

RUE is developed using the React framework, version 17. 

In this version, the Mobius files (with a _.mob_ extensions) are saved as Javascript files. The
Javascript files are then copied into RUE. The files contain a main function, which when executed
will generate both the spatial model and the spatial data.

The four Mobius Javascript files can be found in the folder `/src/components/models/` folder. The
input data, in the form of Geojson data, is also saved in the same folder. 

The Mobius Javascript files require various Mobius libraries. The
source code for these Mobius libraries can be found in the `/src/mobius/` folder.

The spatial models are generated in the Mobius `GI` format. These models are subsequently visualised
as 3D models in a Mobius viewer, which is embedded within RUE in an _iframe_ html component. RUE
communicates with the Mobius viewer using a simple `post-messsage` API. The API allows RUE to load
the different models, depending on the tab that is selected at the top of the viewer. 

For this version of RUE, Mobius Modeller version 0.6 was used. 
* [Mobius Modeller 0.6](https://design-automation.github.io/mobius-parametric-modeller-0-6/)

When this version of RUE was develop, the LuckySheet library was not yet available on the NPM
package manager. The source code for LuckySheet was therefore included, under the
`/public/luckysheet/` folder.

## Installation and Build

To install, change to root folder, then:
`npm install`

To init credentials:
`amplify init`

To start dev server:
`npm start`